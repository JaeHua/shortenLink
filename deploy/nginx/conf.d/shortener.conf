# deploy/nginx/conf.d/shortener.conf
server {
    listen 80;
    server_name 43.155.103.82;

    access_log /var/log/nginx/shortener.access.log main;
    error_log  /var/log/nginx/shortener.error.log warn;

    # 短域名访问，转发到 show-api
    location / {
        proxy_pass http://show-api:8889;
        proxy_set_header X-Real-IP $remote_addr;
        proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
    }

    # 转链管理入口（可另用管理域名）
    location /convert {
        proxy_pass http://convert-api:8888;
        proxy_set_header X-Real-IP $remote_addr;
        proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
    }
}